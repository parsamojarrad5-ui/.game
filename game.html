<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³ Ø¹Ø¯Ø¯ Ø¨Ø§ Ù‚Ù„Ø¨â€ŒÙ‡Ø§</title>
  <style>
    :root{
      --bg:#d9a53a;        /* Ø®Ø±Ø¯Ù„ÛŒ */
      --card:#fff7e6;
      --text:#2b2b2b;
      --accent:#0f9d58;    /* Ø³Ø¨Ø² Ø¯Ú©Ù…Ù‡ */
      --accent2:#ff7f11;   /* Ù†Ø§Ø±Ù†Ø¬ÛŒ Ø®Ø±ÛŒØ¯ */
      --danger:#d93025;    /* Ù‚Ø±Ù…Ø² Ø¨Ø§Ø®Øª/Ø§Ø´ØªØ¨Ø§Ù‡ */
      --heart:#e0245e;     /* Ù‚Ø±Ù…Ø² Ù‚Ù„Ø¨ */
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Vazirmatn, IRANSans, Segoe UI, Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
    }
    .app{
      width:100%;
      max-width:560px;
      background:var(--card);
      border-radius:16px;
      box-shadow: 0 10px 30px rgba(0,0,0,.15);
      padding:20px;
    }
    .title{
      text-align:center;
      font-weight:700;
      font-size:20px;
    }
    .subtitle{
      text-align:center;
      margin-top:6px;
      color:#4a4a4a;
      font-size:14px;
    }
    .hearts{
      display:flex;
      gap:8px;
      justify-content:center;
      flex-wrap:wrap;
      margin:16px 0 20px;
    }
    .heart{
      font-size:22px;
      filter: drop-shadow(0 2px 2px rgba(0,0,0,.15));
      transition: transform .15s ease, opacity .15s ease;
    }
    .heart.dead{
      opacity:.25;
      transform: scale(.85);
    }
    .row{
      display:flex;
      gap:10px;
      margin-top:8px;
    }
    input[type="number"]{
      flex:1;
      height:44px;
      border:2px solid #ddd;
      border-radius:10px;
      padding:0 12px;
      font-size:16px;
      outline:none;
    }
    input[type="number"]:focus{border-color:#bbb}
    .btn{
      border:none;
      border-radius:10px;
      height:44px;
      padding:0 14px;
      font-size:16px;
      cursor:pointer;
      color:white;
      display:flex;
      align-items:center;
      gap:8px;
      box-shadow: 0 6px 16px rgba(0,0,0,.15);
    }
    .btn-primary{background:var(--accent)}
    .btn-shop{background:var(--accent2); width:100%; justify-content:center; margin-top:12px;}
    .status{
      margin-top:14px;
      padding:12px;
      border-radius:10px;
      background:#fff;
      border:1px dashed #e0e0e0;
      min-height:44px;
      line-height:1.6;
    }
    .status.good{border-color:#a8e6cf; background:#f5fffa}
    .status.bad{border-color:#ffc9c9; background:#fff6f6; color:var(--danger)}
    .footer{
      margin-top:10px;
      text-align:center;
      font-size:12px;
      color:#666;
    }
    .pill{
      display:inline-block;
      padding:4px 10px;
      border-radius:999px;
      background:#f0f0f0;
      font-size:12px;
      margin:6px 4px 0;
    }
  </style>
</head>
<body>
  <main class="app">
    <div class="title">âœ¨ ÛŒÙ‡ Ø¹Ø¯Ø¯ Ø¨ÛŒÙ† 1 ØªØ§ 2500 Ø­Ø¯Ø³ Ø¨Ø²Ù† âœ¨</div>
    <div class="subtitle">Ù‡Ø± Ø­Ø¯Ø³ØŒ ÛŒÚ©ÛŒ Ø§Ø² Ù‚Ù„Ø¨â€ŒÙ‡Ø§ Ú©Ù… Ù…ÛŒâ€ŒÚ©Ù†Ù‡. Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ± Ù…ÛŒâ€ŒØ´ÛŒØŒ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒ!</div>

    <div id="hearts" class="hearts"></div>

    <div class="row">
      <input id="guessInput" type="number" min="1" max="2500" placeholder="Ø­Ø¯Ø³ Ø´Ù…Ø§" />
      <button id="guessBtn" class="btn btn-primary">Ø­Ø¯Ø³ Ø¨Ø²Ù† ğŸš€</button>
    </div>

    <button id="buyBtn" class="btn btn-shop">ğŸ’– Ø®Ø±ÛŒØ¯ 1 Ù‚Ù„Ø¨ Ø§Ø¶Ø§ÙÙ‡</button>

    <div id="status" class="status"></div>

    <div class="footer">
      <span class="pill">Ø­Ø¯Ø§Ù‚Ù„: <b id="minHint">1</b></span>
      <span class="pill">Ø­Ø¯Ø§Ú©Ø«Ø±: <b id="maxHint">2500</b></span>
      <span class="pill">Ø­Ø¯Ø³â€ŒÙ‡Ø§: <b id="tries">0</b></span>
    </div>
  </main>

  <script>
    // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø§Ø²ÛŒ
    const MAX = 2500;
    const START_LIVES = 10;

    // Ø­Ø§Ù„Øª Ø¨Ø§Ø²ÛŒ
    let target = randInt(1, MAX);
    let lives = START_LIVES;
    let tries = 0;
    let minHint = 1, maxHint = MAX;
    let finished = false;

    // Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§
    const heartsEl = document.getElementById('hearts');
    const inputEl  = document.getElementById('guessInput');
    const guessBtn = document.getElementById('guessBtn');
    const buyBtn   = document.getElementById('buyBtn');
    const statusEl = document.getElementById('status');
    const minHintEl= document.getElementById('minHint');
    const maxHintEl= document.getElementById('maxHint');
    const triesEl  = document.getElementById('tries');

    // Ø´Ø±ÙˆØ¹
    renderHearts();
    updateHUD();
    setStatus('Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒÙ…! ÛŒÚ© Ø¹Ø¯Ø¯ Ø­Ø¯Ø³ Ø¨Ø²Ù† Ùˆ Ø¯Ú©Ù…Ù‡ Ø±Ùˆ Ø¨Ø²Ù†.');

    // Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§
    guessBtn.addEventListener('click', onGuess);
    inputEl.addEventListener('keydown', e=>{
      if(e.key === 'Enter') onGuess();
    });
    buyBtn.addEventListener('click', ()=>{
      if(finished) return;
      lives += 1;
      renderHearts();
      pulse(buyBtn);
      setStatus('ÛŒÚ© Ù‚Ù„Ø¨ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯! ğŸ’– Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯Ù‡.');
    });

    // ØªÙˆØ§Ø¨Ø¹
    function onGuess(){
      if(finished) return;
      const val = Number(inputEl.value);
      if(!Number.isInteger(val) || val < 1 || val > MAX){
        setStatus('Ù„Ø·ÙØ§Ù‹ Ø¹Ø¯Ø¯ÛŒ Ø¨ÛŒÙ† 1 ØªØ§ 2500 ÙˆØ§Ø±Ø¯ Ú©Ù†.', true);
        pulse(inputEl);
        return;
      }

      tries += 1;

      if(val === target){
        finished = true;
        setStatus(`Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯ÛŒ! ğŸ‰ Ø¹Ø¯Ø¯ Ø¯Ø±Ø³Øª ${target} Ø¨ÙˆØ¯. Ø¯Ø± ${tries} Ø­Ø¯Ø³ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯ÛŒ.`, false, true);
        guessBtn.disabled = true;
        inputEl.disabled  = true;
        buyBtn.disabled   = true;
        celebrate();
        return;
      }

      lives -= 1;
      renderHearts();
      updateHUD();

      if(val < target){
        minHint = Math.max(minHint, val + 1);
        setStatus(`Ú©Ù… Ú¯ÙØªÛŒ ğŸ‘‡ Ø¹Ø¯Ø¯ Ø¨Ø²Ø±Ú¯â€ŒØªØ±Ù‡.`, true);
      } else {
        maxHint = Math.min(maxHint, val - 1);
        setStatus(`Ø²ÛŒØ§Ø¯ Ú¯ÙØªÛŒ ğŸ‘† Ø¹Ø¯Ø¯ Ú©ÙˆÚ†Ú©â€ŒØªØ±Ù‡.`, true);
      }

      minHintEl.textContent = minHint;
      maxHintEl.textContent = maxHint;

      if(lives <= 0){
        finished = true;
        setStatus(`Ø¨Ø§Ø®ØªÛŒ ğŸ˜” Ø¹Ø¯Ø¯ Ø¯Ø±Ø³Øª ${target} Ø¨ÙˆØ¯. Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ù…ÛŒâ€ŒÚ©Ù†ÛŒØŸ`, true);
        guessBtn.disabled = true;
        inputEl.disabled  = true;
        buyBtn.disabled   = true;
      }
      inputEl.select();
    }

    function renderHearts(){
      heartsEl.innerHTML = '';
      const total = START_LIVES; // Ù†Ù…Ø§ÛŒØ´ Ù¾Ø§ÛŒÙ‡ 10 Ù‚Ù„Ø¨
      for(let i=0;i<total;i++){
        const span = document.createElement('span');
        span.className = 'heart' + (i < total - lives ? ' dead' : '');
        span.textContent = 'â¤ï¸';
        heartsEl.appendChild(span);
      }
      // Ù‚Ù„Ø¨â€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÙ‡ (Ø®Ø±ÛŒØ¯) Ø±Ø§ Ù‡Ù… Ù†Ø´Ø§Ù† Ø¨Ø¯Ù‡
      if(lives > START_LIVES){
        for(let i=START_LIVES;i<lives;i++){
          const span = document.createElement('span');
          span.className = 'heart';
          span.textContent = 'ğŸ’–';
          heartsEl.appendChild(span);
        }
      }
    }

    function updateHUD(){
      triesEl.textContent = tries;
    }

    function setStatus(msg, isBad=false, isGood=false){
      statusEl.textContent = msg;
      statusEl.classList.remove('bad','good');
      if(isBad) statusEl.classList.add('bad');
      if(isGood) statusEl.classList.add('good');
    }

    function pulse(el){
      el.animate([{transform:'scale(1)'},{transform:'scale(1.06)'},{transform:'scale(1)'}], {duration:220});
    }

    function celebrate(){
      // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ú©ÙˆÚ†ÛŒÚ© Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø¯
      heartsEl.animate([{transform:'scale(1)'},{transform:'scale(1.05)'},{transform:'scale(1)'}], {duration:600});
    }

    function randInt(min,max){
      return Math.floor(Math.random()*(max-min+1))+min;
    }
  </script>
</body>
  </html>
