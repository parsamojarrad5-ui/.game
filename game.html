<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³ Ø¹Ø¯Ø¯ ğŸ®</title>
  <style>
    body {
      margin:0;
      font-family: Vazirmatn, sans-serif;
      background:#f5d67a;
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
    }
    .container {display:flex;gap:20px;max-width:1000px;width:100%;}
    .game {
      flex:2;background:#fff7e6;border-radius:16px;padding:20px;
      box-shadow:0 8px 20px rgba(0,0,0,.2);position:relative;
    }
    .sidebar {flex:1;background:#fff;border-radius:16px;padding:12px;
      box-shadow:0 6px 16px rgba(0,0,0,.15);}
    .title {text-align:center;font-size:22px;font-weight:bold;}
    .subtitle {text-align:center;color:#444;margin-bottom:12px;}
    .hearts {display:flex;gap:6px;justify-content:center;margin:12px 0;flex-wrap:wrap;}
    .heart {font-size:26px;transition:transform .2s;}
    .heart.dead {opacity:.3;transform:scale(.8);}
    input {width:100%;height:50px;font-size:18px;border-radius:10px;
      border:2px solid #ccc;padding:0 10px;margin-top:10px;}
    .btn {border:none;border-radius:10px;cursor:pointer;font-size:18px;
      padding:12px 20px;margin-top:10px;box-shadow:0 6px 16px rgba(0,0,0,.2);}
    .btn-guess {background:#0f9d58;color:#fff;width:100%;font-size:22px;}
    .btn-buy {background:#ff7f11;color:#fff;width:auto;font-size:14px;
      position:absolute;left:20px;top:20px;}
    .btn-settings {background:#4285f4;color:#fff;width:auto;font-size:14px;
      position:absolute;right:20px;top:20px;}
    .status {margin-top:14px;padding:12px;border-radius:10px;background:#fff;
      border:1px dashed #ccc;min-height:44px;}
    .status.bad {background:#ffe6e6;color:#d93025;}
    .status.good {background:#e6ffe6;color:#0f9d58;}
    .footer {margin-top:10px;text-align:center;}
    .pill {display:inline-block;padding:4px 10px;border-radius:999px;background:#f0f0f0;margin:4px;}
    ul {padding-right:20px;}
    #settingsPanel {display:none;margin-top:20px;padding:12px;background:#fff;
      border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,.1);}
    #settingsPanel h3 {margin:0 0 10px;}
    #settingsPanel input {margin-top:8px;}
  </style>
</head>
<body>
  <div class="container">
    <div class="game" id="gameArea">
      <div class="title">âœ¨ ÛŒÙ‡ Ø¹Ø¯Ø¯ Ø¨ÛŒÙ† 1 ØªØ§ 2500 Ø­Ø¯Ø³ Ø¨Ø²Ù† âœ¨</div>
      <div class="subtitle">Ù‡Ø± Ø­Ø¯Ø³ØŒ ÛŒÚ©ÛŒ Ø§Ø² Ù‚Ù„Ø¨â€ŒÙ‡Ø§ Ú©Ù… Ù…ÛŒâ€ŒÚ©Ù†Ù‡. Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ± Ù…ÛŒâ€ŒØ´ÛŒØŒ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒ!</div>
      <div id="hearts" class="hearts"></div>

      <input id="guessInput" type="number" min="1" max="2500" placeholder="Ø­Ø¯Ø³ Ø´Ù…Ø§" />
      <button id="guessBtn" class="btn btn-guess">ğŸš€ Ø­Ø¯Ø³ Ø¨Ø²Ù† ğŸš€</button>

      <div id="status" class="status"></div>

      <div class="footer">
        <span class="pill">Ø­Ø¯Ø§Ù‚Ù„: <b id="minHint">1</b></span>
        <span class="pill">Ø­Ø¯Ø§Ú©Ø«Ø±: <b id="maxHint">2500</b></span>
        <span class="pill">Ø­Ø¯Ø³â€ŒÙ‡Ø§: <b id="tries">0</b></span>
      </div>

      <button id="buyBtn" class="btn btn-buy">ğŸ’– Ø®Ø±ÛŒØ¯ Ù‚Ù„Ø¨</button>
      <button id="settingsBtn" class="btn btn-settings">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>

      <div id="settingsPanel">
        <h3>ØªÙˆØ¶ÛŒØ­Ø§Øª</h3>
        <p>Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒ ØªÙˆØ³Ø· <b>Ù¾Ø§Ø±Ø³Ø§ Ù…Ø¬Ø±Ø¯</b> Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡<br>Ú©Ù…Ú© Ø¯Ø¨ÛŒØ±Ø§Ù†: Ø§Ø³ØªØ§Ø¯ Ø´Ø§Ù‡Ù…Ø±Ø§Ø¯ÛŒ Ùˆ Ø§Ø³ØªØ§Ø¯ Ø·ÛŒØ¨</p>
        <h3>Ú©Ø¯ Ø¬Ø§ÛŒØ²Ù‡</h3>
        <input id="bonusInput" type="text" placeholder="Ú©Ø¯ Ø¬Ø§ÛŒØ²Ù‡ Ø±Ùˆ ÙˆØ§Ø±Ø¯ Ú©Ù†" />
      </div>
    </div>

    <div class="sidebar">
      <b>Ø­Ø¯Ø³â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§:</b>
      <ul id="guesses"></ul>
    </div>
  </div>

  <script>
    const MAX = 2500;
    const START_LIVES = 11;
    let target = randInt(1, MAX);
    let lives = START_LIVES;
    let tries = 0;
    let minHint = 1, maxHint = MAX;
    let finished = false;
    let buyCount = 0;

    const heartsEl = document.getElementById('hearts');
    const inputEl  = document.getElementById('guessInput');
    const guessBtn = document.getElementById('guessBtn');
    const buyBtn   = document.getElementById('buyBtn');
    const statusEl = document.getElementById('status');
    const minHintEl= document.getElementById('minHint');
    const maxHintEl= document.getElementById('maxHint');
    const triesEl  = document.getElementById('tries');
    const guessesEl= document.getElementById('guesses');
    const settingsBtn = document.getElementById('settingsBtn');
    const settingsPanel = document.getElementById('settingsPanel');
    const bonusInput = document.getElementById('bonusInput');
    const gameArea = document.getElementById('gameArea');

    renderHearts();
    setStatus('Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒÙ…! ÛŒÚ© Ø¹Ø¯Ø¯ Ø­Ø¯Ø³ Ø¨Ø²Ù† ğŸš€');

    guessBtn.addEventListener('click', onGuess);
    inputEl.addEventListener('keydown', e=>{if(e.key==='Enter') onGuess();});
    buyBtn.addEventListener('click', ()=>{
      if(finished) return;
      if(buyCount >= 2){
        setStatus('Ø¯ÛŒÚ¯Ù‡ Ù†Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ù‚Ù„Ø¨ Ø¨Ø®Ø±ÛŒ âŒ', true);
        buyBtn.disabled = true;
        return;
      }
      lives += 1;
      buyCount += 1;
      renderHearts();
      setStatus('ÛŒÚ© Ù‚Ù„Ø¨ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯! ğŸ’–');
    });
    settingsBtn.addEventListener('click', ()=>{
      settingsPanel.style.display = settingsPanel.style.display==='none' ? 'block' : 'none';
    });
    bonusInput.addEventListener('input', ()=>{
      if(bonusInput.value.trim().toLowerCase()==='parsa'){
        gameArea.style.background='red';
      } else {
        gameArea.style.background='#fff7e6';
      }
    });

    function onGuess(){
      if(finished) return;
      const val = Number(inputEl.value);
      if(!Number.isInteger(val) || val < 1 || val > MAX){
        setStatus('Ù„Ø·ÙØ§Ù‹ Ø¹Ø¯Ø¯ÛŒ Ø¨ÛŒÙ† 1 ØªØ§ 2500 ÙˆØ§Ø±Ø¯ Ú©Ù†.', true);
        return;
      }
      tries++;
      const li = document.createElement('li');
      li.textContent = val;
      guessesEl.appendChild(li);

      inputEl.value = ""; // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø¹Ø¯Ø¯ Ù‚Ø¨Ù„ÛŒ

      if(val === target){
        finished = true;
        setStatus(`ğŸ‰ Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯ÛŒ! Ø¹Ø¯Ø¯ Ø¯Ø±Ø³Øª ${target} Ø¨ÙˆØ¯.`, false, true);
        return;
      }

      lives--;
      renderHearts();
      triesEl.textContent = tries;

      if(val < target){
        minHint = Math.max(minHint, val+1);
        setStatus(`Ú©Ù… Ú¯ÙØªÛŒ ğŸ‘‡ Ø¹Ø¯Ø¯ Ø¨Ø²Ø±Ú¯â€ŒØªØ±Ù‡.`, true);
      } else {
        maxHint = Math.min(maxHint, val-1);
        setStatus(`Ø²ÛŒØ§Ø¯ Ú¯ÙØªÛŒ ğŸ‘† Ø¹Ø¯Ø¯ Ú©ÙˆÚ†Ú©â€ŒØªØ±Ù‡.`, true);
      }

      minHintEl.textContent = minHint;
      maxHintEl.textContent = maxHint;

      if(lives <= 0){
        finished = true;
        setStatus(`ğŸ˜” Ø¨Ø§Ø®ØªÛŒ! Ø¹Ø¯Ø¯ Ø¯Ø±Ø³Øª ${target} Ø¨ÙˆØ¯.`, true);
      }
    }

    function renderHearts(){
